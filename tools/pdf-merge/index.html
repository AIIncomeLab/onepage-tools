<!doctype html>
<html lang="zh-CN">
<head>
<!-- 通用头部替换占位符 -->
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>在线合并 PDF｜PDF Merge</title>
<meta name="description" content="将多个 PDF 文件合并为一个，浏览器本地完成，文件不上传服务器。">
<link rel="stylesheet" href="/assets/styles.css">
<script src="/assets/layout.js" defer></script>
<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
</head>
<body>
<header class="container site-header" data-site-header data-title="在线合并 PDF" data-note="浏览器端本地合并，隐私安全。"></header>
<main class="container card">
<label>选择多个 PDF（可多选）：</label>
<input class="input" type="file" id="files" accept="application/pdf" multiple>
<br>
<button class="btn" id="mergeBtn">合并并下载</button>
<div id="log" class="muted" style="margin-top:10px"></div>
</main>
<footer class="container site-footer" data-site-footer></footer>
<script>
const $=s=>document.querySelector(s);
$('#mergeBtn').onclick=async()=>{
const files=[...$('#files').files];
if(!files.length){alert('请先选择 PDF');return}
$('#mergeBtn').disabled=true;$('#log').textContent='正在合并…';
const { PDFDocument } = PDFLib;
const outDoc = await PDFDocument.create();
for (const f of files){
const buf = await f.arrayBuffer();
const inDoc = await PDFDocument.load(buf);
const pages = await outDoc.copyPages(inDoc, inDoc.getPageIndices());
pages.forEach(p=>outDoc.addPage(p));
}
const outBytes = await outDoc.save();
const blob = new Blob([outBytes], {type:'application/pdf'});
const a=document.createElement('a');
a.href=URL.createObjectURL(blob);a.download='merged.pdf';a.click();
$('#log').textContent='已完成！';$('#mergeBtn').disabled=false;
};
</script>
</body>
</html>
